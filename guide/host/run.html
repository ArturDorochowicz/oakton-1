<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Improved "Run" Command | Oakton</title>
    <meta name="description" content="Add Robust Command Line Options to .Net Applications">
    <link rel="stylesheet" href="/oakton/assets/style.13643d27.css">
    <link rel="modulepreload" href="/oakton/assets/Home.5ef413e1.js">
    <link rel="modulepreload" href="/oakton/assets/AlgoliaSearchBox.cfbbf700.js">
    <link rel="modulepreload" href="/oakton/assets/app.e640da3b.js">
    <link rel="modulepreload" href="/oakton/assets/guide_host_run.md.e0a67a98.lean.js">
    
    <meta name="twitter:title" content="Improved &quot;Run&quot; Command | Oakton">
    <meta property="og:title" content="Improved &quot;Run&quot; Command | Oakton">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/oakton/" aria-label="Oakton, back to home" data-v-675d8756 data-v-4a583abe><!----> Oakton</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/oakton/guide/" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://discord.com/channels/1074998995086225460/1075015939977904168" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Discord | Join Chat <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/JasperFx/oakton" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/oakton/guide/" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://discord.com/channels/1074998995086225460/1075015939977904168" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Discord | Join Chat <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/JasperFx/oakton" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/oakton/guide/">Getting Started</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/oakton/guide/commands">Commands</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/oakton/guide/host/">Integration with IHost</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/oakton/guide/host/run">Improved &quot;Run&quot; Command</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#overriding-the-hosting-environment">Overriding the Hosting Environment</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#overriding-configuration-items">Overriding Configuration Items</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#overriding-the-minimum-log-level">Overriding the Minimum Log Level</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#running-environment-checks-before-starting-the-application">Running Environment Checks Before Starting the Application</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/oakton/guide/host/environment">Environment Checks</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/oakton/guide/host/extensions">Writing Extension Commands</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/oakton/guide/host/describe">The &quot;describe&quot; command</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/oakton/guide/host/resources">Stateful Resources</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/oakton/guide/bootstrapping">Bootstrapping with CommandExecutor</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/oakton/guide/parsing">Parsing Arguments and Optional Flags</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/oakton/guide/help">Help Text</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/oakton/guide/opts">&quot;Opts&quot; Files</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/oakton/guide/discovery">Command Assembly Discovery</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="improved-run-command" tabindex="-1">Improved &quot;Run&quot; Command <a class="header-anchor" href="#improved-run-command" aria-hidden="true">#</a></h1><p>To run your application normally from a command prompt with all the default configuration <strong>from the project root directory</strong>, there&#39;s no real change from what you&#39;d do without <em>Oakton.AspNetCore</em>. The command is still just:</p><div class="language-"><pre><code>dotnet run
</code></pre></div><p>If your command prompt is at the solution directory (my personal default), you can use all the available <a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-run?tabs=netcore21" target="_blank" rel="noopener noreferrer">dotnet run</a> options, and in this case tell the dotnet CLI to run a project in another directory like this example:</p><div class="language-"><pre><code>dotnet run --project src/MvcApp/MvcApp.csproj
</code></pre></div><p>So far, no changes from what you have today, so let&#39;s dig into what&#39;s changed. First, at any time to see the list of available commands in your system, use either the command <code>dotnet run -- ?</code> or <code>dotnet run -- help</code> as shown below:</p><div class="language-"><pre><code>dotnet run -- ?
</code></pre></div><p>Which gave this output on a sample MVC application with commands from an extension library:</p><div class="language-"><pre><code>Searching &#39;AspNetCoreExtensionCommands, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null&#39; for commands

  -----------------------------------------------------------------------
    Available commands:
  -----------------------------------------------------------------------
    check-env -&gt; Execute all environment checks against the application
          run -&gt; Runs the configured AspNetCore application
        smoke -&gt; Simply try to build a web host as a smoke test
  ------------------------------------------------------------------------
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">warning</p><p>When you&#39;re using the <code>dotnet run</code> command, the usage of the double dashes <em>--</em> separates command line arguments to the <code>dotnet run</code> command itself from the command arguments to your application. The <code>args</code> array passed into your application will be any arguments or flags to the right of the <em>--</em> separator.</p></div><p>The <em>run</em> command shown above is the default command for Oakton and what will be executed unless you explicitly choose another named command.</p><p>Looking farther into what the <em>run</em> command provides with:</p><div class="language-"><pre><code>dotnet run -- ? run
</code></pre></div><p>gives you this help text for the options on the <em>run</em> command:</p><div class="language-"><pre><code> Usages for &#39;run&#39; (Runs the configured AspNetCore application)
  run [-c, --check] [-e, --environment &lt;environment&gt;] [-v, --verbose] [-l, --log-level &lt;logleve&gt;] [----config:&lt;prop&gt; &lt;value&gt;]

  ---------------------------------------------------------------------------------------------------------------------------------------
    Flags
  ---------------------------------------------------------------------------------------------------------------------------------------
                        [-c, --check] -&gt; Run the environment checks before starting the host
    [-e, --environment &lt;environment&gt;] -&gt; Use to override the ASP.Net Environment name
                      [-v, --verbose] -&gt; Write out much more information at startup and enables console logging
          [-l, --log-level &lt;logleve&gt;] -&gt; Override the log level
          [----config:&lt;prop&gt; &lt;value&gt;] -&gt; Overwrite individual configuration items
  ---------------------------------------------------------------------------------------------------------------------------------------
</code></pre></div><h2 id="overriding-the-hosting-environment" tabindex="-1">Overriding the Hosting Environment <a class="header-anchor" href="#overriding-the-hosting-environment" aria-hidden="true">#</a></h2><p>To override the hosting environment that your ASP.Net Core application runs under, use the <em>environment</em> flag as shown below:</p><div class="language-"><pre><code>dotnet run -- --environment Testing
</code></pre></div><p>This would be the equivalent of running your application with this code (note the usage of <code>UseEnvironment(&quot;Testing&quot;)</code>):</p><div class="language-"><pre><code>    public class Program
    {
        public static Task&lt;int&gt; Main(string[] args)
        {
            return CreateWebHostBuilder(args)
                .RunOaktonCommands(args);
        }

        public static IWebHostBuilder CreateWebHostBuilder(string[] args) =&gt;
            WebHost.CreateDefaultBuilder(args)
                .UseStartup&lt;Startup&gt;()

                // This is what the --environment flag does
                .UseEnvironment(&quot;Testing&quot;);
        
    }
</code></pre></div><p>See <a href="https://andrewlock.net/how-to-use-multiple-hosting-environments-on-the-same-machine-in-asp-net-core/" target="_blank" rel="noopener noreferrer">Andrew Lock on how the hosting environment can be useful</a>.</p><h2 id="overriding-configuration-items" tabindex="-1">Overriding Configuration Items <a class="header-anchor" href="#overriding-configuration-items" aria-hidden="true">#</a></h2><p>Individual values in your system&#39;s <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-2.2" target="_blank" rel="noopener noreferrer">IConfiguration</a> can be overridden at the command line using the <em>--config</em> flag like so:</p><div class="language-"><pre><code>dotnet run -- --config:key1 value1 --config:key2 value2
</code></pre></div><p>The flag usage above would override the system configuration with the values <em>key1=value1</em> and <em>key2=value2</em>.</p><h2 id="overriding-the-minimum-log-level" tabindex="-1">Overriding the Minimum Log Level <a class="header-anchor" href="#overriding-the-minimum-log-level" aria-hidden="true">#</a></h2><p>You can override the minimum log level in the running application using any valid value of the <a href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel?view=aspnetcore-2.2" target="_blank" rel="noopener noreferrer">LogLevel</a> enumeration and the <em>--log-level</em> flag as shown below:</p><div class="language-"><pre><code>dotnet run -- --log-level Information
</code></pre></div><p>See <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/logging/?view=aspnetcore-2.2" target="_blank" rel="noopener noreferrer">Logging in .NET Core and ASP.NET Core</a> for more information about ASP.Net Core logging.</p><h2 id="running-environment-checks-before-starting-the-application" tabindex="-1">Running Environment Checks Before Starting the Application <a class="header-anchor" href="#running-environment-checks-before-starting-the-application" aria-hidden="true">#</a></h2><p>You can also opt into running any configured <a href="/guide/host/environment.html">environment checks</a> before starting Kestrel. If any of the environment checks fail, the application startup will fail. The goal of this feature is to make deployments be self-diagnosing and fail fast at startup time if the system can detect problems in its configuration or with its dependencies.</p><p>To run the environment checks as part of the run command, just use the <em>--environment</em> flag like this:</p><div class="language-"><pre><code>dotnet run -- --environment
</code></pre></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><a class="link" href="https://github.com/JasperFx/oakton/edit/master/docs/guide/host/run.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Suggest changes to this page <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/oakton/guide/host/" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Integration with IHost</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/oakton/guide/host/environment" data-v-38ede35f><span class="text" data-v-38ede35f>Environment Checks</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"guide_bootstrapping.md\":\"417a0b92\",\"guide_commands.md\":\"b0c810bc\",\"guide_discovery.md\":\"b2dae723\",\"guide_getting_started.md\":\"62897973\",\"guide_help.md\":\"2349eabe\",\"guide_host_describe.md\":\"4fb44470\",\"guide_host_environment.md\":\"5b08a9d4\",\"guide_host_extensions.md\":\"dcabd51d\",\"guide_host_index.md\":\"856150ab\",\"guide_host_resources.md\":\"c0cf3073\",\"guide_host_run.md\":\"e0a67a98\",\"guide_index.md\":\"c7502b23\",\"guide_opts.md\":\"cbfe0c9d\",\"guide_parsing.md\":\"caa63d5e\",\"index.md\":\"cf870b04\"}")</script>
    <script type="module" async src="/oakton/assets/app.e640da3b.js"></script>
    
  </body>
</html>